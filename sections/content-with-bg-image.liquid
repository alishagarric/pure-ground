{% style %}
    .content-with-bg-image {
      --topSpacingRatio: {{section.settings.top_spacing}} / 100;
      --bottomSpacingRatio: {{section.settings.bottom_spacing}} / 100;
    }
 {% endstyle %}

<div id="Content-with-bg-image-{{ section.id }}" class="content-with-bg-image color-{{section.settings.color_scheme}} __align-{{section.settings.alignment}}">
   {{section.settings}}
   {% if section.settings.hero %}
      <h1 class="content-with-bg-image__heading h2">{{ section.settings.heading | escape }}</h1>
      {% if section.settings.subheading %}
         <h2 class="content-with-bg-image__subheading h5">{{ section.settings.subheading }}</h2>
      {% endif %}
   {% else %}
      <h2 class="content-with-bg-image__heading">{{ section.settings.heading | escape }}</h2>
      {% if section.settings.subheading %}
         <h3 class="content-with-bg-image__subheading h5">{{ section.settings.subheading }}</h3>
      {% endif %}
   {% endif %}
   {% if section.settings.text %}
      <div class="content-with-bg-image__text">{{ section.settings.text }}</div>
   {% endif %}
    {% if section.settings.button_link and section.settings.button_label %}
         <a href="{{section.settings.button_link}}" class="content-with-bg-image__btn btn">{{section.settings.button_label}}</a>
    {% endif %}
   {%- if section.settings.icon -%}
      <div class="content-with-bg-image__icon">
         {% render 'svg-plant' %} 
      </div>
   {%- endif -%}

   {%- if section.settings.image != blank -%}
      hi
      {% render 'next-gen-img', image: section.settings.image %}
   {%- endif -%}
</div>

{% schema %}
{
   "name":"Content with Bg Image",
   "tag":"section",
   "class":"section",
   "settings":[
      {
         "type":"text",
         "id":"heading",
         "label":"Section Heading"
      },
      {
         "type":"text",
         "id":"subheading",
         "label":"Subheading"
      },
      {
         "type": "header",
         "content": "Button"
      },       
      {
         "type": "text",
         "id": "button_label",
         "default": "Button label",
         "label": "Button Label"
      },
      {
         "type": "url",
         "id": "button_link",
         "label": "Button Link"
      },
      {
        "type":"richtext",
        "id":"text",
        "label":"Text Content"
      },
      {
         "type":"image_picker",
         "id":"image",
         "label":"Background Image"
      },
      {
         "type": "checkbox",
         "id": "hero",
         "label": "Use as hero?",
         "info": "Should be selected if this section is the first or second on a page and contains the page title."
      },
      {
         "type":"radio",
         "id":"alignment",
         "label":"Select Alignment",
         "options":[
            {
               "value":"left",
               "label":"Left"
            },
            {
               "value":"center",
               "label":"Center"
            },
            {
               "value":"right",
               "label":"Right"
            }
         ],
         "default":"left"
      },
      {
         "type": "checkbox",
         "id": "icon",
         "label": "Include Icon?",
         "info": "Adds an icon to the right of the section."
      },
      {
         "type":"select",
         "id":"color_scheme",
         "options":[
            {
               "value":"cream",
               "label":"Cream (Default)"
            },
            {
               "value":"dark-cream",
               "label":"Dark Cream"
            },
            {
               "value":"grass",
               "label":"Grass"
            },
            {
               "value":"sun",
               "label":"Sun"
            },
            {
               "value":"ground",
               "label":"Ground"
            },
            {
               "value":"sky",
               "label":"Sky"
            },
            {
               "value":"tan",
               "label":"Tan"
            }
         ],
         "default":"cream",
         "label":"Color Scheme"
      },
      {
         "type":"range",
         "id":"top_spacing",
         "min":0,
         "max":100,
         "step":10,
         "unit":"%",
         "label":"Top Spacing",
         "default":50
      },
      {
         "type":"range",
         "id":"bottom_spacing",
         "min":0,
         "max":100,
         "step":10,
         "unit":"%",
         "label":"Bottom Spacing",
         "default":50
      }
   ],
   "presets":[
      {
         "name":"Content with Bg Image"
      }
   ]
}

{% endschema %}
