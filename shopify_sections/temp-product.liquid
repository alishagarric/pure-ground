{% style %}
    #Temp-product-{{ section.id }} {
      --topSpacingRatio: {{section.settings.top_spacing}} / 100;
      --bottomSpacingRatio: {{section.settings.bottom_spacing}} / 100;
    }
{% endstyle %}

{% assign images = "https://d1jyxxz9imt9yb.cloudfront.net/project/242/meta_image/mobile/Nania-whisty-projectpage.jpg, https://d1jyxxz9imt9yb.cloudfront.net/project/242/meta_image/mobile/Nania-whisty-projectpage.jpg, https://d1jyxxz9imt9yb.cloudfront.net/project/242/meta_image/mobile/Nania-whisty-projectpage.jpg,https://d1jyxxz9imt9yb.cloudfront.net/project/242/meta_image/mobile/Nania-whisty-projectpage.jpg,https://cdn.shopify.com/s/files/1/0562/9486/6967/articles/unsplash_pBwMdofMxtU_350x.jpg?v=1646062936,https://cdn.shopify.com/s/files/1/0562/9486/6967/articles/unsplash_pBwMdofMxtU_350x.jpg?v=1646062936,https://cdn.shopify.com/s/files/1/0562/9486/6967/articles/unsplash_pBwMdofMxtU_350x.jpg?v=1646062936" | split: "," %}
{% assign currentProduct = all_products.example-product %}

<div id="Temp-product-{{ section.id }}" class="temp-product color-{{section.settings.color_scheme}}"  
>
  <ul class="breadcrumb"> 
    <li><a href="/">All Ingredients</a></li>
      {% render 'svg-caret' %}
    <li><a href="/">Culinary Herbs, Spices, & vegetables</a></li>
</ul>
  <span class="temp-product__organic mobile h4">Organic</span>
  <div class="temp-product__container">
    <div class="temp-product__content">
      <div class="temp-product__headline">
        <div>
          <div class="temp-product__text p-sm caption-with-letter-spacing">Baso</div>
          <h1 class="temp-product__title h2">Basil</h1>
        </div>
        <span class="temp-product__organic h4">Organic</span>
      </div>

      <div class="temp-product__price">
        <p class="h4">$19.99</p>
        <a href="/" class="caption-sm">LOG IN FOR WHOLESALE PRICING</a>
      </div>

      <p class="temp-product__description">With a sweet and slightly peppery flavor, this herb pairs well with balsamic vinegar, blackberry, and lemon.</p>

      <table class="temp-product__info p-sm">
        <tr><td class="product-id caption-sm">Product ID</td><td class="caption-sm">Organic Holy Basil</td></tr>
        <tr><td class="product-id caption-sm">Product Name</td><td class="caption-sm">Ocimum basilicum</td></tr>
        <tr><td class="product-id caption-sm">Product ID</td><td class="caption-sm">tulsi</td></tr>
        <tr><td class="product-id caption-sm">Country of Origin</td><td class="caption-sm">Ocimum basilicum</td></tr>
        <tr><td class="product-id caption-sm">Product ID</td><td class="caption-sm">Ocimum basilicum</td></tr>
      </table>

      <p class="temp-product__fair-trade caption-sm">Fair Trade Available on request</p>

      <form>
        <div class="temp-product__case">
          <label class="caption-sm">Case Size</label>
          <div class="temp-product__case__options p-sm">
            <span>1 lb Bag</span>
            <span>1 lb Bag</span>
            <span>1 lb Bag</span>
            <span>1 lb Bag</span>
          </div>
      </div>
      

      <div class="temp-product__type">
        <label class="caption-sm">Type</label>
        <div class="temp-product__type__options p-sm">
          <span>Powder</span>
          <span>Powder</span>
          <span>Powder</span>
          <span>Powder</span>
          <span>Powder</span>
          <span>Powder</span>
          <span>Powder</span>
          <span>Powder</span>
        </div>
      </div>

        <div class="temp-product__add-to-cart">
          <div class="quantity-input">
            <button class="quantity__button no-js-hidden" name="minus" type="button">
              <span class="visually-hidden">Decrease quantity for Example Product</span>
              <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" class="icon icon-minus" fill="none" viewBox="0 0 10 2">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M.5 1C.5.7.7.5 1 .5h8a.5.5 0 110 1H1A.5.5 0 01.5 1z" fill="currentColor">
                </path>
              </svg>
            </button>
            <input class="caption-sm" type="number" value="1" />
            <button class="quantity__button no-js-hidden" name="plus" type="button">
              <span class="visually-hidden">Increase quantity for Example Product</span>
              <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" class="icon icon-plus" fill="none" viewBox="0 0 10 10">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M1 4.51a.5.5 0 000 1h3.5l.01 3.5a.5.5 0 001-.01V5.5l3.5-.01a.5.5 0 00-.01-1H5.5L5.49.99a.5.5 0 00-1 .01v3.5l-3.5.01H1z" fill="currentColor">
                </path>
              </svg>
            </button>
          </div>
          <input class="temp-product__quantity-input caption-sm" type="number" value="1" />
          <input class="btn btn-add" href="/" type="submit" value="Add to cart">
          <a class="btn" href="/">Request C of A Results</a>
        </div>
        <a href="/" class="sample">Request a sample</a>
      </form>
    </div>

    <div class="temp-product__sliders">
      <div class="temp-product__slider" data-flickity='{ 
        "wrapAround": true, "pageDots": false }'
      >
        {% for image in images %}
          {% render 'next-gen-img' image: image %}
        {% endfor %}
      </div>

    <div class="temp-product__slider-nav" data-flickity='{"asNavFor": ".temp-product__slider", "contain": true, "pageDots": false}'
    >
      {% for image in images %}
        {% render 'next-gen-img' image: image %}
      {% endfor %}
    </div>
  </div>
    

  </div>

  <div class="temp-product__tabs">
    <nav class="temp-product__tabs-nav">
      <ul>
        <li><info-button class="info-button caption __active" data-tab="description">Description</info-button></li>
        <li><info-button class="info-button caption" data-tab="best-uses">Best Uses</info-button></li>
        <li><info-button class="info-button caption" data-tab="related-articles">Related Articles</info-button></li>
        <li><info-button class="info-button caption" data-tab="spec-sheet">Spec Sheet</info-button></li>
      </ul>
    </nav>

    <div class="temp-product__tabs">
      <div class="tab-content __active" data-tab="description">
        <div class="tab-content__description">
          {{ currentProduct.metafields.my_fields.product_description }}   
        </div>    
        <div class="tab-content__benefits"> 
          <p>{{ currentProduct.metafields.my_fields.benefits }}</p>
        </div>
      </div>
      <div class="tab-content" data-tab="best-uses">{{currentProduct.metafields.my_fields.best_uses}}</div>
      <div class="tab-content" data-tab="related-articles">Aenean sed maximus nibh. Praesent scelerisque, nunc non ultrices ornare, diam leo fringilla ipsum, sed finibus libero elit vel ipsum. Donec mollis sollicitudin tortor, eu scelerisque urna rhoncus ut. Nulla facilisi. Sed egestas est nec est consectetur cursus.</div>
      <div class="tab-content" data-tab="spec-sheet">{{currentProduct.metafields.my_fields.spec_sheet}}</div>        
    </div>
  </div>

  {% render 'product-accordions' %}
</div>

{% javascript %}

  class InfoNavButton extends HTMLElement {
    constructor() {
      super();

      this.setupListener();
    }

    //Add a on click listener to every button for product info
    setupListener() {
      this.addEventListener('click', this.updateInfo.bind(this));
    }

    //on tab nav button click, updates what is active
    updateInfo() {

      //parent element for this section
      var thisSection = this.parentNode.parentNode.parentNode.parentNode;
      console.log(thisSection,'this section');
      //clicked on item's tab
      var tab = this.getAttribute('data-tab');
      //all tabs in this section
      var infoItems = thisSection.querySelectorAll('.tab-content');
            console.log(infoItems, 'infoItems');
      //all nav buttons
      var infoNavItems = thisSection.querySelectorAll('.info-button');
      console.log(infoNavItems, 'info nav items');

      //remove or add active class on buttons
      for ( var i = 0; i < infoItems.length; i++ ){
        if (infoItems[i].getAttribute('data-tab') == tab ){
          infoItems[i].classList.add('__active');
        }
        else {
          infoItems[i].classList.remove('__active');
        }
      }

      //remove active class on nav buttons
      for (var i = 0; i < infoNavItems.length; i++ ) {
        infoNavItems[i].classList.remove('__active');
      }

      //add active class on clicked item
      this.classList.add('__active');
    }
  }

  customElements.define('info-button', InfoNavButton);

  


{% endjavascript %}

{% schema %}
{
  "name": "Temp Product",
  "tag": "section",
  "class": "temp-product__wrapper",
  "settings": [
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "cream",
          "label": "Cream (Default)"
        },
        {
          "value": "dark-cream",
          "label": "Dark Cream"
        },
        {
          "value": "grass",
          "label": "Grass"
        },
        {
          "value": "sun",
          "label": "Sun"
        },
        {
          "value": "ground",
          "label": "Ground"
        },
        {
          "value": "sky",
          "label": "Sky"
        },
        {
          "value": "tan",
          "label": "Tan"
        }
      ],
      "default": "cream",
      "label": "Color Scheme"
    },
    {
      "type": "header",
      "content": "Section Spacing"
    },
    {
      "type": "range",
      "id": "top_spacing",
      "min": 0,
      "max": 100,
      "step": 10,
      "unit": "%",
      "label": "Top Spacing",
      "default": 50
    },
    {
      "type": "range",
      "id": "bottom_spacing",
      "min": 0,
      "max": 100,
      "step": 10,
      "unit": "%",
      "label": "Bottom Spacing",
      "default": 50
    }
  ],
  "presets": [
  ]
}
{% endschema %}
